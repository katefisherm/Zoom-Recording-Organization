import os
import csv

# Create a dictionary to store date-to-meeting-name mapping
date_to_name = {}

# Load data from the CSV file
with open("meeting_names.csv", mode='r') as csv_file:
    csv_reader = csv.DictReader(csv_file)
    for row in csv_reader:
        date_to_name[row['Date']] = row['MeetingName']

# Specify the directory where your Zoom files are located
zoom_directory = "/path/to/zoom/files"

# Iterate through the files in the directory
for filename in os.listdir(zoom_directory):
    if filename.endswith(".mp4"):  # Adjust the file extension as needed
        # Extract the date code from the filename (assuming it's in YYYY-MM-DD format)
        date_code = filename[:10]

        # Check if the date code is in the CSV
        if date_code in date_to_name:
            meeting_name = date_to_name[date_code]

            # Create a directory based on the meeting name if it doesn't exist
            meeting_directory = os.path.join(zoom_directory, meeting_name)
            if not os.path.exists(meeting_directory):
                os.makedirs(meeting_directory)

            # Move the file to the meeting directory and rename it
            file_path = os.path.join(zoom_directory, filename)
            new_file_path = os.path.join(meeting_directory, filename)
            os.rename(file_path, new_file_path)

print("Files organized successfully.")
